/*!
 * Betle Web v0.0.1
 * Copyright 2011-2017 korbenzhang
 * Licensed under the BSD-2-Clause license
 */
 
function ajaxReload(a){return $.ajax({url:a,async:!1,success:function(a){}}),window.location.reload(),!1}function addBookmark(a,b){try{window.external.AddFavorite(b,a)}catch(c){try{window.sidebar.addPanel(a,b,"")}catch(d){alert("加入收藏失败，请使用Ctrl+D进行添加!")}}}function setHomepage(a){if(document.all)document.body.style.behavior="url(#default#homepage)",document.body.setHomePage(a);else if(window.sidebar){if(window.netscape)try{netscape.security.PrivilegeManager.enablePrivilege(" UniversalXPConnect ")}catch(b){alert(" 该操作被浏览器拒绝，如果想启用该功能，请在地址栏内输入 about:config,然后将项 signed.applets.codebase_principal_support 值该为true ")}var c=Components.classes[" @mozilla.org/preferences-service;1 "].getService(Components.interfaces.nsIPrefBranch);c.setCharPref(" browser.startup.homepage ",a)}}function add(a,b){return a+b}function checkboxAll(a,b){for(var c=document.getElementsByName(a),d=0;d<c.length;d++)c[d].checked=b}function toggleCheckbox(a,b){for(var c=document,d=c.getElementsByName(b),e=d.length,f=0;f<e;f++)d[f].checked=a.checked}function toggleCheckboxClass(a,b){for(var c=document,d=c.getElementsByClass(b),e=d.length,f=0;f<e;f++)d[f].checked=a.checked}function reverseCheckbox(a){for(var b=document.getElementsByName(a),c=0;c<b.length;c++){var d=b[c].checked;b[c].checked=!d}}function jsonKeys(a){var b=[];for(var c in a)b.push(c);return b}function isInArray(a,b){if(""===b)return!1;if(0===b.length)return!1;for(var c=0,d=b.length;c<d;c++)if(a===b[c])return!0;return!1}function isNotInArraay(a,b){return!isInArray(a,b)}function getUsedCols(a,b,c){var d=[],e=b.split(","),f=c.split(",");(0===e.length||1===e.length&&""===e[0])&&(e=a);for(var g=0,h=a.length;g<h;g++){var i=a[g];"Id"!==i&&isInArray(i,e)&&isNotInArraay(i,f)&&d.push(i)}return d}function isHasKey(a,b){for(col in b)if(col===a)return!0;return!1}function getExclude(a){var b=getOption("exclude",a);return""===b?"Id":b}function getOption(a,b){for(var c in b)if(a===c)return b[c];return""}function jsonToTable(a,b){if(0===a.length)return"No results.";var c="<table class='mbt-grid'><thead><tr>",d=getOption("include",b),e=getOption("exclude",b),f=jsonKeys(a[0]),g=getUsedCols(f,d,e);return c+=colsHead(g),c+="</tr></thead>",c+="<tbody>",c+=jsonTableBody(a,g),c+="</tbody></table>"}function colsHead(a){for(var b="",c=0;c<a.length;c++)b=b+"<th>"+a[c]+"</th>";return b}function jsonTableBody(a,b){for(var c="",d=0;d<a.length;d++){c+="<tr>";for(var e=0;e<b.length;e++){var f=b[e];c=c+"<td class='"+f+"'>"+a[d][f]+"</td>"}c+="</tr>"}return c}function parseJsonTable(a){$.getJSON(a,function(a){var b=jsonToTable(a);$("#zone").html(b),zoneDialog()})}function switchLangEn(){var a="/Lang/ChangeLang?lang=en-US";return AjaxReload(a),!1}function switchLangZh(){var a="/Lang/ChangeLang?lang=zh-CN";return AjaxReload(a),!1}function tableToJson(a){for(var b=[],c=[],d=0;d<a.rows[0].cells.length;d++)c[d]=a.rows[0].cells[d].innerHTML.toLowerCase().replace(/ /gi,"");for(var d=1;d<a.rows.length;d++){for(var e=a.rows[d],f={},g=0;g<e.cells.length;g++)f[c[g]]=e.cells[g].innerHTML;b.push(f)}return b}function zoneDialog(){$("#zone").dialog({minWidth:800,width:"auto",colseOnEscape:!0,modal:!0,buttons:{"关闭":function(){$(this).dialog("close")}}}),$("#zone").css({width:"auto",minWidth:800,height:"auto"})}$(document).ready(function(){$(".nav").accessibleDropDown()}),$.fn.accessibleDropDown=function(){var a=$(this);$("li",a).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")}),$("a",a).focus(function(){$(this).parents("li").addClass("hover")}).blur(function(){$(this).parents("li").removeClass("hover")})},document.getElementByClass=function(a){for(var b=[],c=document.all?document.all:document.getElementsByTagName("*"),d=0;d<c.length;d++){var e=c[d].className.split(" ");e.contain(a)&&(b[b.length]=c[d])}return b};